<?xml version="1.0" encoding="UTF-8"?>
<Module>
<ModulePrefs title="Christmas Countdown" background="transparent" author="RevelDigital" description="Countdown days until Christmas">
<UserPref required="true" datatype="hidden" display_name="width" name="rdW"/>
<UserPref required="true" datatype="hidden" display_name="height" name="rdH"/>
<UserPref required="true" default_value="font-family:'Mountains of Christmas',cursive;color:#ffffff;font-size:65px;" datatype="style" display_name="Message Style" name="message-style"/>
<UserPref datatype="hidden" name="ForeColor"/>
<UserPref datatype="hidden" name="BackColor" default_value="FFFFFF" />
 <UserPref name="backgroundImage" display_name="Choose Background"  datatype="enum" default_value="none">
    <EnumValue value="images/christmas-countdown-assets/background-1.png" display_value="Background 1" />
    <EnumValue value="images/christmas-countdown-assets/background-2.png" display_value="Background 2" />
    <EnumValue value="images/christmas-countdown-assets/background-3.png" display_value="Background 3" />
    <EnumValue value="images/christmas-countdown-assets/background-4.png" display_value="Background 4" />
    <EnumValue value="images/christmas-countdown-assets/background-5.png" display_value="Background 5" />
  </UserPref>
</ModulePrefs>
<Content type="html">
<![CDATA[

            <style type="text/css">

                body *
                {
                    line-height: 1.2em; 
                    letter-spacing: 0; 
                    word-spacing: normal;
                }

                body
                {
                    width: __UP_rdW__px;
                    height: __UP_rdH__px;
                    overflow: hidden;
                    padding: 0;
                    margin: 0;
                    text-align: center;
                    background: #88d0ee; /* For browsers that do not support gradients */
                    background: radial-gradient(#88d0ee, #528ec3); /* Standard syntax */
                    background-size: cover; 
                    background-position: center;
                    background-image: url('"'+__UP_backgroundImage__ +'"');
                }

                a 
                {
                    color: white;
                    font-weight: bold;
                    text-decoration: none;
                }

                .content 
                {
                    
                    display: block;
                }

                .content .text
                {
                    text-align: left;
                    line-height: 1.5;
                    width: 90%;
                    max-width: 650px;
                    margin: 0 auto;
                    margin-bottom: 10px;
                }

                #countdownHTML 
                {
                    __UP_message-style__;
                    font-size: calc(4vw + 4vh);
                    color: #fff;
                    margin-top: 5vh;
                    cursor: default;
                    text-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
                }

                .snow1 {
                    background: url(https://designshack.net/tutorialexamples/letitsnow/snow.png);
                    background-repeat: repeat;
                    width: 100%;
                    height: 700px;
                    position: absolute;
                    top: 0;
                    left: 0;
                    animation: snowOne 10s infinite linear;
                }
                .snow2 {
                    background: url(https://designshack.net/tutorialexamples/letitsnow/snow.png);
                    background-repeat: repeat;
                    width: 100%;
                    height: 700px;
                    position: absolute;
                    top: 0;
                    left: 0;
                    animation: snowTwo 10s infinite linear;
                    background-size: 300px;
                    filter: blur(1px);
                }
                .snow3 {
                    background: url(https://designshack.net/tutorialexamples/letitsnow/snow.png);
                    background-repeat: repeat;
                    width: 100%;
                    height: 650px;
                    position: absolute;
                    top: 0;
                    left: 0;
                    animation: snowThree 10s infinite linear;
                    background-size: 800px;
                    filter: blur(2px);
                }

                @keyframes snowOne{
                    0%
                    {
                        background-position: 0px 0px;
                    }
                    100%
                    {
                        background-position: 100px 750px;
                    }
                }
                @keyframes snowTwo{
                    0%
                    {
                        background-position: 0px -100px;
                    }
                    100%
                    {
                        background-position: 0px 750px;
                    }
                }
                @keyframes snowThree{
                    0%
                    {
                        background-position: 0px 100px;
                    }
                    100%
                    {
                        background-position: 300px 750px;
                    }
                }
                                
            </style>

            
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
            <script src="https://reveldigital.github.io/gadget-common/utils.js" type="text/javascript"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>

            <div class="frame">
                <div class="snow1"></div>
                <div class="snow2"></div>
                <div class="snow3"></div>
                <div class="content">
                    <div id="countdownHTML">
                    </div>
                </div>
            </div>

            <script type="text/javascript">

                var prefs = new gadgets.Prefs();

                WebFont.load({
                    google: {
                    families: [
                        RevelDigital.getFamilyName(prefs.getString("message-style"))
                    ]
                    }
                });
                

                var targetDate = new Date("12/25/"+ new Date().getFullYear());
                var sec = true;
                var string;
                var secondsNumber;
                var minutesNumber;
                var hoursNumber;
                var daysNumber;
                var seconds;
                var minutes;
                var hours;
                var days;

                function calculate()
                {
                    var rawCountdownNumber = targetDate.getTime() - new Date().getTime();
                    
                    if (rawCountdownNumber <= 1000){
                        rawCountdownNumber = 0;
                        document.getElementById("countdownHTML").innerHTML = "Merry Christmas!";
                        return;
                    }

                    secondsNumber = (rawCountdownNumber / 1000) >> 0;
                    minutesNumber = (secondsNumber / 60) >> 0;
                    hoursNumber = (minutesNumber / 60) >> 0;
                    daysNumber = (hoursNumber / 24) >> 0;
                    secondsNumber = secondsNumber % 60;
                    minutesNumber = minutesNumber % 60;
                    hoursNumber = hoursNumber % 24;
                    seconds = ", " + secondsNumber + " sec<br>";
                    minutes = minutesNumber + " min";
                    hours = hoursNumber + " hours,<br>";
                    days = daysNumber + " days, ";
                    

                    if(hoursNumber == 1){
                        hours = hoursNumber + " hour,<br>";
                    }

                    if(daysNumber == 1){
                        days = daysNumber + " day, ";
                    }

                    if(sec == true){
                        string = days + hours + minutes + seconds;
                    }else{
                        string = days + hours + minutes;
                    }
                    
                    document.getElementById("countdownHTML").innerHTML = string + "Till Christmas";

                }
                
                function load() {
                    calculate();
                    setInterval(calculate, 1000);
                }
                
                gadgets.util.registerOnLoadHandler(load);

            </script>
            
            <script type="text/javascript">
                
                if('serviceWorker' in navigator) {
                  navigator.serviceWorker.register('service-worker')
                    .then(function(registration) {
                      console.log('Service Worker Registered');
                    });
                }
                
            </script>
        ]]>
</Content>
</Module>