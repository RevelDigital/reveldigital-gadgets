<?xml version="1.0" encoding="UTF-8" ?> 
<Module> 
<ModulePrefs title="RevelDigital Google Spreadsheet Gadget" description="Basic tabular display of Google spreadsheet data" author="RevelDigital" background="transparent">

</ModulePrefs>
<Content type="html">
<![CDATA[




<html>
<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript" charset="utf-8"></script>

    <style type="text/css" media="screen">
      body{ background:#000;color:#fff;font-size:.9em; }
      .msg{ background:#aaa;padding:.2em; border-bottom:1px #000 solid}
      .old{ background-color:#246499;}
      .new{ background-color:#3B9957;}
    .error{ background-color:#992E36;}
    </style>

    <script type="text/javascript" charset="utf-8">
    function addmsg(type, msg){

        $("#messages").empty();
        $("#messages").append(
            "<div class='msg "+ type +"'>"+ msg +"</div>"
        );
    }

      function getMedia() {
    var image = $.getJSON("http://api.reveldigital.com/playlists.json?api_key=" + prefs.getString("apikey"), function (data) {
      
      for(var i=0; i < data.length; i++) {
        var currentPlaylist = data[i];
        if(currentPlaylist.name.toLowerCase() == 'Movie Titles 2') {
            console.log(currentPlaylist.name);
          
        }
      }

    });
  }

    function waitForMsg(){

        $.ajax({
            type: "GET",
            url: "http://www.lumisnet.com/msgsrv.php",
 crossDomain: true,

            async: true,
            cache: false,
            timeout:50000, 

            success: function(data){ 
                addmsg("new", data); 
                setTimeout(
                    waitForMsg, 
                    1000 
                );
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                setTimeout(
                    waitForMsg,
                    5000); 
            }
        });
    };

    $(document).ready(function(){
        waitForMsg(); 
    });
    </script>
</head>
<body>
    <div id="messages">
        <div class="msg old">

        </div>
    </div>
</body>
</html>







]]>
</Content>
</Module>