<?xml version="1.0" encoding="UTF-8" ?>
<Module>
	<ModulePrefs title="Count Up" 
		height="20" width="220" scaling="false"
		author="Salman Esmaili" 
    author_email="webdev@esmaili.ws"
		screenshot="http://salman.esmaili.ws/countdown/counter.png"
		thumbnail="http://salman.esmaili.ws/countdown/countert.png"
		description="Count up from a specified day">
		<Require feature="dynamic-height"/>
    <Require feature="setprefs" />
    <UserPref name="body-style" display_name="Text Style" datatype="style" default_value="font-family:Verdana;color:rgb(255, 255, 255);font-size:18px;" required="true" />
    <UserPref name="rdW" display_name="Width" required="true" default_value="280" datatype="hidden" />
    <UserPref name="rdH" display_name="Height" required="true" default_value="190" datatype="hidden" />
	</ModulePrefs>
	<Content type="html">
		<![CDATA[
<style type="text/css">
body *
{
  line-height: 1.2em; 
  letter-spacing: 0; 
  word-spacing: normal; 
}

body
{
  background: transparent;
}

.body-style
{
  __UP_body-style__;
  width: __UP_rdW__px;
  height: __UP_rdH__px;
}
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<div id="counter" class="body-style">
</div>

<SCRIPT type="text/javascript">
function setcountup(theyear, themonth, theday) {
    yr = theyear;
    mo = themonth;
    da = theday
}

setcountup(2006, 09, 15)

//STEP 2: Configure text to be attached to count up
var displaymessage = ""

//STEP 3: Configure the below 5 variables to set the width, height, background color, and text style of the countup area
var countupwidth = '350px'
var countupheight = '35px'
var countupbgcolor = 'white'
var opentags = '<font color="black">'
var closetags = '</font>'
var boldme = '<B>'
var unboldme = '</B>'

//////////DO NOT EDIT PASS THIS LINE//////////////////

var montharray = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
var crosscount = ''

function countup() {
    var today = new Date()
    var todayy = today.getYear()
    if (todayy < 1000)
        todayy += 1900
    var todaym = today.getMonth()
    var todayd = today.getDate()
    var todayh = today.getHours()
    var todaymin = today.getMinutes()
    var todaysec = today.getSeconds()
    var todaystring = montharray[todaym] + " " + todayd + ", " + todayy + " " + todayh + ":" + todaymin + ":" + todaysec
    paststring = montharray[mo - 1] + " " + da + ", " + yr
    dd = Date.parse(todaystring) - Date.parse(paststring)
    dday = Math.floor(dd / (60 * 60 * 1000 * 24) * 1)
    dhour = Math.floor((dd % (60 * 60 * 1000 * 24)) / (60 * 60 * 1000) * 1)
    dmin = Math.floor(((dd % (60 * 60 * 1000 * 24)) % (60 * 60 * 1000)) / (60 * 1000) * 1)
    dsec = Math.floor((((dd % (60 * 60 * 1000 * 24)) % (60 * 60 * 1000)) % (60 * 1000)) / 1000 * 1)

    var txt = boldme + dday + unboldme + " D, " + boldme + dhour + unboldme + " H, " + boldme + dmin + unboldme + " M, " + boldme + dsec + unboldme + " S. " + displaymessage ;

    $('#counter').text(txt);
    
    setTimeout("countup()", 1000)
}

gadgets.util.registerOnLoadHandler(countup);
</SCRIPT>
     	]]>
  </Content>

</Module>