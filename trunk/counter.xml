<?xml version="1.0" encoding="UTF-8" ?>
<Module>
	<ModulePrefs title="Count Up" author="RevelDigital" description="Count up from a specified day" background="transparent">
    <UserPref name="startDate" display_name="Start Date" datatype="string" />
    <UserPref name="body-style" display_name="Text Style" datatype="style" default_value="font-family:Verdana;color:rgb(255, 255, 255);font-size:18px;" required="true" />
    <UserPref name="rdW" display_name="Width" required="true" default_value="280" datatype="hidden" />
    <UserPref name="rdH" display_name="Height" required="true" default_value="190" datatype="hidden" />
	</ModulePrefs>
	<Content type="html">
		<![CDATA[
<style type="text/css">
body *
{
  line-height: 1.2em; 
  letter-spacing: 0; 
  word-spacing: normal; 
}

body
{
  background: transparent;
}

.body-style
{
  __UP_body-style__;
  width: __UP_rdW__px;
  height: __UP_rdH__px;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
<script src="https://reveldigital-gadgets.googlecode.com/svn/third-party/moment-with-langs.min.js" type="text/javascript"></script>

<div id="counter" class="body-style">
</div>

<SCRIPT type="text/javascript">

var prefs = new gadgets.Prefs();

var startDate = moment();
var boldme = '<b>'
var unboldme = '</b>'

function init() {

  startDate = moment(prefs.getString("startDate"));
  
  countup();
}

function countup() {

  var diff = moment.duration(moment().diff(startDate));
  
  var txt = "<span>" + boldme + diff.days() + unboldme + " D, " + boldme + diff.hours() + unboldme + " H, " + boldme + diff.minutes() + unboldme + " M, " + boldme + diff.seconds() + unboldme + " S</span>";
  
  $('#counter').empty().append($(txt));
    
  setTimeout("countup()", 1000)
}

gadgets.util.registerOnLoadHandler(init);
</SCRIPT>
     	]]>
  </Content>
</Module>