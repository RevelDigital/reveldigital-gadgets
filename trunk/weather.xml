<?xml version="1.0" encoding="UTF-8" ?> 
<Module> 
<ModulePrefs title="RevelDigital Weather Gadget" description="Displays current weather information in various formats" author="RevelDigital" background="transparent">
  <Require feature="flash" />
  <UserPref name="weatherformat" display_name="Weather Format" default_value="11829!weatherV.swf" datatype="enum" >
    <EnumValue value="11829!weatherV.swf" display_value="Vertical" />
  </UserPref> 
</ModulePrefs>
<Content type="html">
<![CDATA[

<style type="text/css">
  body { background-color: transparent; }
</style>

<div id="flashcontainer" style="background-color:transparent;"></div> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>

<embed src="player.swf" width="300" height="300" allowscriptaccess="always" wmode="transparent" type="application/x-shockwave-flash" flashvars="" />

<script type="text/javascript">

  var prefs = new gadgets.Prefs();

  function loadFlash() {

    var url = "http://uploads.reveldigital.com/" + prefs.getString("weatherformat");

    var flashvars = {
        src: url
    };
    
    var params = {
        allowfullscreen: "true",
        allowscriptaccess: "always",
        wmode: "transparent"
    };
     
    var attributes = {};
    
    swfobject.embedSWF(url, "flashcontainer", prefs.getInt("h"), prefs.getInt("w"), "10", "", flashvars, params, attributes );
  }

  // When gadget first loads, display still photo.
  gadgets.util.registerOnLoadHandler(loadFlash);
</script>
]]>
</Content>
</Module>